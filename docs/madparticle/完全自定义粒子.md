---
id: custom
title: 完全自定义粒子
hide_table_of_contents: false
---

# 完全自定义粒子

MadParticle提供另一个非常强大的功能，允许你自由且非常方便地为游戏添加新粒子。

---

## 添加新粒子

:::info 注意

添加的新粒子应该仅用于`/mp`或`/madparticle`指令的参数，而**不应该**将其用于`/particle`等处。将其用于其他地方是未定义行为。

:::

如果游戏内的各种粒子贴图无法满足你的需求，你可以通过这个功能添加你自己的粒子。

你只需要准备好粒子贴图，然后把它们放进游戏根目录的`customparticle`文件夹内，并遵循如下的命名规则：

- 如果这个粒子只有一张贴图（即不随着年龄变化，或是在生成时没有随机变化）：
    - 你只需要将其命名为`<粒子名称>.png`。例如`leaves.png`。
- 如果这个粒子有多张贴图：
    - 你需要从0开始，依次将其命名为`<粒子名称>#<序号>.png`，例如`smoke#0.png`，`smoke#1.png`。
- 生成的粒子默认命名空间为`madparticle`。如果你想自定义命名空间：
    - 请在文件名前面加上`<命名空间>~`，例如`nocaet~leaves.png`，`test~smoke#1.png`。

如果你的命名有误，日志中可能会有相应的提醒，以便于找到具体对应的文件。

启动游戏，你应该就能看到新粒子了！

:::caution

- 过多的`.png`文件可能会导致游戏加载缓慢。懒得优化，只有等。
- 目前暂时没有与服务端同步图片的功能。在多人游戏中使用自定义粒子是未定义行为。

:::

---

## 在Fabric中使用MadParticle

MadParticle提供Fabric版本，但有且只有核心功能：解析命令并生成粒子，不提供GUI辅助工具。

当然，我并不推荐在Fabric版本中嗯写如此长的命令，所以在一般情况下有几种方案：

- 你可以先使用Forge版本完成地图有关MP部分的制作，再将其复制到Fabric版本中。
- 作为一个变通，你也可以用WorldEdit的schme来转移编写好的命令方块。
- 当然，你可以同时打开Forge和Fabric客户端，在Forge版本的Designer GUI中编写好命令，复制到Fabric版本中。

:::tip

请关注Fabric/Forge两端版本更新可能导致的命令参数变化。

:::

很有可能你需要用到的某个粒子由某个Mod提供，而这个Mod仅在Forge端提供——这正是发明完全自定义粒子的初衷。

:::caution

在复制某个mod的资产时，请注意其许可证是否允许你这样做。

:::

你只需要在拷贝存档前，将需要的粒子图片文件复制到Fabric端的`customparticle`文件夹内，并按上述的规则指定命名空间即可。