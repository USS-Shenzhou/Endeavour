---
id: meta
title: 元指令参数指南
hide_table_of_contents: false

---

# 元指令参数指南

`meta`参数是一个元指令区域，以`CompoundTag`的形式呈现，被设计用来保障未来更新时的兼容性和扩展性。

你可以根据下列介绍、你的需求及当前版本，来选择性地填写内容。

---

## 喷花筒标记

> 可用版本：0.3.+
>
> 形式：`"tada":1`
>
> 值类型：布尔值

表示这是一条喷花筒指令，客户端需计算玩家手部位置并在生成粒子时进行偏移。

---

## 数学表达式：dx、dy、dz

> 可用版本：0.4.+
>
> 形式：`"dx":"<数学表达式f(t)>"`
>
> 示例：`"dy":"0.2*sin(3t)+0.5*t"`
>
> 值类型：字符串

你可以填写一个以`t`为自变量的函数表达式，来取得对每tick中粒子在X、Y、Z三轴上增量的高级控制。由于直接控制粒子的绝对坐标会极大地影响指令的复用性，所以假设你想要粒子在X轴上的的运动轨迹为`F(t)`，你就需要填写其**导数`f(t)`**，以此消除绝对坐标的影响。

同样地，为了消除不同粒子寿命对指令复用性的影响，**`t`的值域为`[0,1]`**（对应粒子生成到消失），在实际应用时按照粒子寿命进行放缩。

:::caution

如果你在此处指定了dx、dy、dz，则对应的`gravity`、`xDeflection`、`zDeflection`将会失效。

:::

### 支持的运算符

以下列出支持的所有运算符号：

- `+`、`-`、`*`、`/`：加、减（负）、乘、除；
- `^`：幂
- `%`：取模

如示例所示，你可以在适当的时候省略乘号。

### 支持的常数

以下列出支持的所有常数：

- `pi`或`π`：圆周率，`3.14159265358979323846`
- `e`：自然常数，`2.7182818284590452354`
- `φ`：黄金比例，`1.61803398874`

### 支持的函数

以下列出支持的所有函数：

- `abs`：绝对值
- `sin`，`cos`，`tan`：正弦，余弦，正切；单位为弧度
- `asin`，`acos`，`atan`：反正弦，反余弦，反正切；
- `sinh`，`cosh`，`tanh`：双曲正弦，双曲余弦，双曲正切；
- `sqrt`，`cbrt`：平方根，立方根
- `floor`，`ceil`：不大于的最大整数，不小于的最小整数
- `exp`：以e为底的幂
- `log`，`log10`，`log2`：自然对数（底数e），常用对数（底数10），对数（底数2）
- `signum`：符号函数

### 科学计数法

技术上讲确实支持，但是我实在想不到什么样的粒子需要科学计数法......
